/* Custom styles for SpeedHeart GroupChat component */

/* Community theme variables - dynamically updated via inline styles */
.speedheart-chat {
  --community-primary: var(--theme-primary, hsl(var(--romance)));
  --community-primary-dark: var(--theme-primary-dark, hsl(var(--romance-dark)));
  --community-secondary: var(--theme-secondary, hsl(var(--romance))/10);
  --community-gradient-from: var(--theme-gradient-from, hsl(var(--romance)));
  --community-gradient-to: var(--theme-gradient-to, hsl(var(--purple-accent)));
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
}

/* Remove default blue focus outlines */
.speedheart-chat * {
  outline: none !important;
}

.speedheart-chat *:focus {
  outline: none !important;
}

.speedheart-chat input:focus,
.speedheart-chat textarea:focus,
.speedheart-chat [contenteditable]:focus {
  outline: none !important;
}

/* Outgoing messages (user's messages) - Community themed gradient */
.speedheart-chat .cs-message--outgoing .cs-message__content {
  background: linear-gradient(135deg, var(--community-gradient-from) 0%, var(--community-gradient-to) 100%) !important;
  color: white !important;
  box-shadow: 0 4px 12px rgba(220, 104, 147, 0.3) !important;
  border: none !important;
}

.speedheart-chat .cs-message--outgoing .cs-message__content-wrapper {
  color: white !important;
}

.speedheart-chat .cs-message--outgoing .cs-message__sender-name {
  color: rgba(255, 255, 255, 0.9) !important;
}

.speedheart-chat .cs-message--outgoing .cs-message__sent-time {
  color: rgba(255, 255, 255, 0.8) !important;
}

/* Incoming messages styling */
.speedheart-chat .cs-message--incoming .cs-message__content {
  background: hsl(var(--background)) !important;
  border: 1px solid hsl(var(--border)) !important;
  color: hsl(var(--foreground)) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.speedheart-chat .cs-message--incoming .cs-message__content-wrapper {
  color: hsl(var(--foreground)) !important;
}

.speedheart-chat .cs-message--incoming .cs-message__sender-name {
  color: var(--community-primary) !important;
  font-weight: 600 !important;
}

.speedheart-chat .cs-message--incoming .cs-message__sent-time {
  color: hsl(var(--muted-foreground)) !important;
}

/* Global chat component styling */
.speedheart-chat .cs-avatar {
  border: 2px solid hsl(var(--border)) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.speedheart-chat .cs-message-input {
  border-top: 1px solid hsl(var(--border)) !important;
  background: rgba(255, 255, 255, 0.95) !important;
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 20 !important;
  backdrop-filter: blur(8px) !important;
  padding-bottom: env(safe-area-inset-bottom) !important;
}

.speedheart-chat .cs-message-input__content-editor {
  background: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
  border: none !important;
  border-radius: 20px !important;
  outline: none !important;
}

.speedheart-chat .cs-message-input__content-editor:focus {
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
}

.speedheart-chat .cs-message-input__content-editor:focus-visible {
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
}

.speedheart-chat .cs-button--send {
  background: linear-gradient(135deg, var(--community-gradient-from) 0%, var(--community-gradient-to) 100%) !important;
  border: none !important;
  color: white !important;
  border-radius: 50% !important;
  transition: transform 0.2s ease !important;
}

.speedheart-chat .cs-button--send:hover {
  transform: scale(1.05) !important;
  box-shadow: 0 4px 12px rgba(220, 104, 147, 0.4) !important;
}

.speedheart-chat .cs-typing-indicator {
  background: hsl(var(--muted)) !important;
  border-radius: 20px !important;
  color: hsl(var(--muted-foreground)) !important;
}

.speedheart-chat .cs-message-list {
  background: transparent !important;
  flex: 1 !important;
  height: 100% !important;
  padding-top: 20px !important;
  padding-bottom: 60px !important;
  margin-bottom: 0 !important;
  margin-top: 0 !important;
}

.speedheart-chat .cs-chat-container {
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  height: 100% !important;
  min-height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  padding: 0 !important;
  margin: 0 !important;
  gap: 0 !important;
}

.speedheart-chat .cs-main-container {
  background: transparent !important;
  height: 100% !important;
  min-height: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* Dark mode support using data attribute selector */
[data-theme="dark"] .speedheart-chat .cs-message--incoming .cs-message__content,
.dark .speedheart-chat .cs-message--incoming .cs-message__content {
  background: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--card-foreground)) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
}

[data-theme="dark"] .speedheart-chat .cs-message--incoming .cs-message__content-wrapper,
.dark .speedheart-chat .cs-message--incoming .cs-message__content-wrapper {
  color: hsl(var(--card-foreground)) !important;
}

[data-theme="dark"] .speedheart-chat .cs-message-input,
.dark .speedheart-chat .cs-message-input {
  background: hsl(var(--background)) !important;
  border-top-color: hsl(var(--border)) !important;
}

[data-theme="dark"] .speedheart-chat .cs-message-input__content-editor,
.dark .speedheart-chat .cs-message-input__content-editor {
  background: hsl(var(--card)) !important;
  border-color: hsl(var(--border)) !important;
  color: hsl(var(--card-foreground)) !important;
}

[data-theme="dark"] .speedheart-chat .cs-message-input__content-editor:focus,
.dark .speedheart-chat .cs-message-input__content-editor:focus {
  border-color: hsl(var(--romance)) !important;
  box-shadow: 0 0 0 2px rgba(220, 104, 147, 0.2) !important;
  outline: none !important;
}

[data-theme="dark"] .speedheart-chat .cs-message-input__content-editor:focus-visible,
.dark .speedheart-chat .cs-message-input__content-editor:focus-visible {
  border-color: hsl(var(--romance)) !important;
  box-shadow: 0 0 0 2px rgba(220, 104, 147, 0.2) !important;
  outline: none !important;
}

[data-theme="dark"] .speedheart-chat .cs-chat-container,
.dark .speedheart-chat .cs-chat-container {
  background: hsl(var(--background)) !important;
  border-color: hsl(var(--border)) !important;
}

[data-theme="dark"] .speedheart-chat .cs-main-container,
.dark .speedheart-chat .cs-main-container {
  background: transparent !important;
  height: 100% !important;
  min-height: 100% !important;
  padding: 0 !important;
  margin: 0 !important;
}

[data-theme="dark"] .speedheart-chat .cs-message-list,
.dark .speedheart-chat .cs-message-list {
  background: transparent !important;
  flex: 1 !important;
  height: 100% !important;
  padding-top: 20px !important;
  padding-bottom: 60px !important;
  margin-bottom: 0 !important;
  margin-top: 0 !important;
}

[data-theme="dark"] .speedheart-chat .cs-typing-indicator,
.dark .speedheart-chat .cs-typing-indicator {
  background: hsl(var(--muted)) !important;
  color: hsl(var(--muted-foreground)) !important;
}

[data-theme="dark"] .speedheart-chat .cs-avatar,
.dark .speedheart-chat .cs-avatar {
  border-color: hsl(var(--border)) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4) !important;
}

/* User messages remain the same in dark mode for brand consistency */
[data-theme="dark"] .speedheart-chat .cs-message--outgoing .cs-message__content,
.dark .speedheart-chat .cs-message--outgoing .cs-message__content {
  background: linear-gradient(135deg, hsl(var(--romance)) 0%, hsl(var(--purple-accent)) 100%) !important;
  color: white !important;
  box-shadow: 0 4px 12px rgba(220, 104, 147, 0.4) !important;
}

/* Media message styling */
.speedheart-chat .cs-message__content img,
.speedheart-chat .cs-message__content video {
  border-radius: 12px !important;
  max-width: 300px !important;
  height: auto !important;
  display: block !important;
  margin: 4px 0 !important;
}

.speedheart-chat .cs-message--outgoing .cs-message__content img,
.speedheart-chat .cs-message--outgoing .cs-message__content video {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.speedheart-chat .cs-message--incoming .cs-message__content img,
.speedheart-chat .cs-message--incoming .cs-message__content video {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

/* File upload dropdown styling */
.speedheart-chat .file-upload-dropdown {
  background: hsl(var(--background)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

/* Attach button styling */
.speedheart-chat .cs-button--attachment {
  background: transparent !important;
  border: none !important;
  color: hsl(var(--muted-foreground)) !important;
  transition: color 0.2s ease !important;
}

.speedheart-chat .cs-button--attachment:hover {
  color: hsl(var(--romance)) !important;
}

/* Message options styling */
.speedheart-chat .message-options-button {
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(8px) !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
  border-radius: 6px !important;
  transition: all 0.2s ease !important;
}

.speedheart-chat .message-options-button:hover {
  background: rgba(255, 255, 255, 1) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

.speedheart-chat .message-options-dropdown {
  background: hsl(var(--background)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
  backdrop-filter: blur(12px) !important;
}

/* Ensure message wrapper positioning */
.speedheart-chat .cs-message-list > div {
  position: relative !important;
}

/* Force proper spacing and layout */
.speedheart-chat .cs-main-container,
.speedheart-chat .cs-main-container > div,
.speedheart-chat .cs-chat-container,
.speedheart-chat .cs-chat-container > div {
  margin: 0 !important;
  padding: 0 !important;
  gap: 0 !important;
}

/* Force input at bottom */
.speedheart-chat .cs-message-input {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  margin: 0 !important;
  z-index: 30 !important;
}

/* Force message list to fill space */
.speedheart-chat .cs-message-list {
  flex: 1 !important;
  overflow-y: auto !important;
  padding-top: 10px !important;
  padding-bottom: 70px !important;
  margin: 0 !important;
}

/* Force avatar display */
.speedheart-chat .cs-avatar {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Force sender name display */
.speedheart-chat .cs-message__sender-name {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Fallback for systems using prefers-color-scheme */
@media (prefers-color-scheme: dark) {
  .speedheart-chat .cs-message--incoming .cs-message__content {
    background: hsl(var(--card)) !important;
    border-color: hsl(var(--border)) !important;
    color: hsl(var(--card-foreground)) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  }

  .speedheart-chat .cs-message-input__content-editor {
    background: hsl(var(--card)) !important;
    border-color: hsl(var(--border)) !important;
    color: hsl(var(--card-foreground)) !important;
  }

  .speedheart-chat .cs-chat-container {
    background: hsl(var(--background)) !important;
    border-color: hsl(var(--border)) !important;
  }

  .speedheart-chat .cs-avatar {
    border-color: hsl(var(--border)) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4) !important;
  }

  .speedheart-chat .cs-message__content img,
  .speedheart-chat .cs-message__content video {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  }
}